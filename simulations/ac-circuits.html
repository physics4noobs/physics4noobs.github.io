<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AC Waveforms | Axomiya Engineer</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;500;600;700&family=Delius&family=Nova+Square&family=Orbitron:wght@400;500;600;700;800;900&family=Inter:wght@300;400;500;600;700&family=Andika:wght@400;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../css/style.css">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ”¬</text></svg>">
  <script src="../js/theme.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>
  <script defer src="../js/firebase-config.js"></script>
  <script defer src="../js/auth.js"></script>
  <script defer src="../js/sim-tracker.js"></script>
  <link rel="stylesheet" href="../css/achievements.css">
  <script defer src="../js/achievements-config.js"></script>
  <script defer src="../js/achievements.js"></script>
</head>
<body>
  <!-- Splash Screen -->
  <div class="splash-screen" id="splash"><div class="splash-pendulum"><div class="sp-mount"></div><div class="sp-pivot"></div><div class="sp-arm"><div class="sp-rod"></div><div class="sp-bob"><div class="sp-glow"></div></div></div></div><div class="splash-logo">Axomiya Engineer</div><div class="splash-tagline">Lets Make Physics Fun</div></div>
<div class="bg-grid"></div>
  <nav class="navbar scrolled">
    <div class="nav-container">
      <a href="../index.html" class="nav-logo" id="nav-logo">
        <div class="logo-icon"><div class="logo-pendulum"><div class="pendulum-mount"></div><div class="pendulum-pivot"></div><div class="pendulum-arm"><div class="pendulum-rod"></div><div class="pendulum-bob"><div class="bob-glow"></div></div></div></div></div>
        <div class="logo-text"><span class="brand-name">Axomiya Engineer</span><span class="brand-tag">LETS MAKE PHYSICS FUN</span></div>
      </a>
      <div class="nav-links">
        <div class="nav-item">
          <a href="../index.html" class="nav-link">Home</a>
        </div>
        <div class="nav-item">
          <a href="../about.html" class="nav-link">About Me</a>
        </div>
        <div class="nav-item"><a href="../chapters.html" class="nav-link">Chapters</a></div>        <div class="nav-item">
          <a href="../simulations.html" class="nav-link active">Simulations</a>
        </div>
        <div class="nav-item">
          <a href="../tests.html" class="nav-link">Tests</a>
        </div>
        <div class="nav-item">
          <a href="../flashcards.html" class="nav-link">Flashcards</a>
        </div>
        <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme"></button>
        <button class="auth-btn" id="auth-login-btn"><svg class="google-icon" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92a5.06 5.06 0 0 1-2.2 3.32v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.1z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>Sign in</button>
        <div class="user-menu nav-item" id="auth-user-menu" style="display:none;"><img class="user-avatar" id="auth-user-avatar" src="" alt="User"><span class="user-name" id="auth-user-name"></span><div class="dropdown"><a href="../progress.html"><div class="dd-icon">&#128200;</div> My Progress</a><div class="dropdown-divider"></div><a href="#" id="auth-logout-btn"><div class="dd-icon">&#128682;</div> Sign Out</a></div></div>
        <a href="../index.html#contact" class="nav-cta">Contact Me</a>
      </div>
      <button class="nav-toggle" aria-label="Menu"><span></span><span></span><span></span></button>
    </div>
  </nav>
  <script>
    (function(){
      var s=document.getElementById('splash');
      if(sessionStorage.getItem('ae-splash')){s.style.display='none';}
      else{
        sessionStorage.setItem('ae-splash','1');setTimeout(function(){s.classList.add('fade-out');},2200);setTimeout(function(){s.style.display='none';},2700);
      }
    })();
  </script>

  <div class="sim-page-container">
    <h1 style="font-family: var(--font-display); font-size: 1.8rem; margin: 16px 0 8px; letter-spacing: 1px;">&#12336; AC Waveforms</h1>
    <p style="color: var(--text-secondary); margin-bottom: 24px;">Grade XII &bull; Alternating Current</p>

    <div class="sim-canvas-wrapper">
      <canvas id="simCanvas" width="850" height="450"></canvas>
      <div class="sim-controls">
        <label>Frequency: <input type="range" id="frequency" min="0.5" max="5" value="1.5" step="0.1"> <span id="freqVal">1.5</span> Hz</label>
        <label>Amplitude: <input type="range" id="amplitude" min="20" max="100" value="60"> <span id="ampVal">60</span> V</label>
        <label>Phase (&phi;): <input type="range" id="phase" min="-180" max="180" value="0" step="5"> <span id="phaseVal">0</span>&deg;</label>
      </div>
    </div>

    <div class="sim-info">
      <h2>About This Simulation</h2>
      <p>This simulation visualizes alternating current (AC) waveforms. The blue sine wave represents voltage and the green wave represents current. Adjust the phase slider to introduce a phase difference, as seen in RLC circuits where inductors cause current to lag voltage and capacitors cause current to lead. The phasor diagram on the right shows the rotating voltage and current vectors in real-time.</p>
      <div class="formula-box" style="margin-top: 16px;">
        V = V&#8320; sin(&omega;t) &nbsp;&nbsp;|&nbsp;&nbsp; I = I&#8320; sin(&omega;t &minus; &phi;) &nbsp;&nbsp;|&nbsp;&nbsp; V<sub>rms</sub> = V&#8320;/&radic;2 &nbsp;&nbsp;|&nbsp;&nbsp; &omega; = 2&pi;f
      </div>
    </div>
  </div>

  <script>
    const canvas = document.getElementById('simCanvas');
    const ctx = canvas.getContext('2d');
    let time = 0;

    const freqSlider = document.getElementById('frequency');
    const ampSlider = document.getElementById('amplitude');
    const phaseSlider = document.getElementById('phase');

    freqSlider.oninput = () => document.getElementById('freqVal').textContent = parseFloat(freqSlider.value).toFixed(1);
    ampSlider.oninput = () => document.getElementById('ampVal').textContent = ampSlider.value;
    phaseSlider.oninput = () => document.getElementById('phaseVal').textContent = phaseSlider.value;

    // Waveform area
    const waveX = 30, waveY = 30, waveW = 540, waveH = 390;
    // Phasor area
    const phasorCX = 720, phasorCY = 200, phasorR = 100;

    function drawBackground() {
      ctx.fillStyle = '#080818';
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      ctx.strokeStyle = 'rgba(0,212,255,0.04)';
      ctx.lineWidth = 1;
      for (let x = 0; x < canvas.width; x += 40) {
        ctx.beginPath(); ctx.moveTo(x, 0); ctx.lineTo(x, canvas.height); ctx.stroke();
      }
      for (let y = 0; y < canvas.height; y += 40) {
        ctx.beginPath(); ctx.moveTo(0, y); ctx.lineTo(canvas.width, y); ctx.stroke();
      }
    }

    function drawWaveformAxes() {
      const midY = waveY + waveH / 2;

      // Waveform background
      ctx.fillStyle = 'rgba(10,10,30,0.5)';
      ctx.fillRect(waveX, waveY, waveW, waveH);
      ctx.strokeStyle = 'rgba(0,212,255,0.15)';
      ctx.lineWidth = 1;
      ctx.strokeRect(waveX, waveY, waveW, waveH);

      // Horizontal grid lines
      ctx.strokeStyle = 'rgba(0,212,255,0.06)';
      for (let i = 1; i < 8; i++) {
        const y = waveY + (waveH / 8) * i;
        ctx.beginPath(); ctx.moveTo(waveX, y); ctx.lineTo(waveX + waveW, y); ctx.stroke();
      }

      // Vertical grid lines
      for (let i = 1; i < 12; i++) {
        const x = waveX + (waveW / 12) * i;
        ctx.beginPath(); ctx.moveTo(x, waveY); ctx.lineTo(x, waveY + waveH); ctx.stroke();
      }

      // Zero line
      ctx.beginPath();
      ctx.moveTo(waveX, midY);
      ctx.lineTo(waveX + waveW, midY);
      ctx.strokeStyle = 'rgba(255,255,255,0.15)';
      ctx.lineWidth = 1;
      ctx.stroke();

      // Labels
      ctx.font = '10px "JetBrains Mono", monospace';
      ctx.fillStyle = 'rgba(255,255,255,0.3)';
      ctx.textAlign = 'right';
      ctx.textBaseline = 'middle';
      ctx.fillText('+V\u2080', waveX - 4, waveY + 40);
      ctx.fillText('0', waveX - 4, midY);
      ctx.fillText('\u2212V\u2080', waveX - 4, waveY + waveH - 40);

      // Time axis label
      ctx.textAlign = 'center';
      ctx.fillText('t \u2192', waveX + waveW + 15, midY);
    }

    function drawWaveforms() {
      const freq = parseFloat(freqSlider.value);
      const V0 = parseInt(ampSlider.value);
      const phi = parseInt(phaseSlider.value) * Math.PI / 180;
      const omega = 2 * Math.PI * freq;
      const midY = waveY + waveH / 2;
      const ampScale = (waveH / 2 - 20) / 100;

      // Draw voltage waveform (blue)
      ctx.beginPath();
      for (let px = 0; px <= waveW; px++) {
        const t = (px / waveW) * 4 / freq + time;
        const v = V0 * Math.sin(omega * t);
        const x = waveX + px;
        const y = midY - v * ampScale;
        if (px === 0) ctx.moveTo(x, y);
        else ctx.lineTo(x, y);
      }
      ctx.strokeStyle = '#00d4ff';
      ctx.lineWidth = 2;
      ctx.shadowColor = '#00d4ff';
      ctx.shadowBlur = 6;
      ctx.stroke();
      ctx.shadowBlur = 0;

      // Draw current waveform (green) with phase difference
      const I0 = V0 * 0.7; // Assume some impedance scaling
      ctx.beginPath();
      for (let px = 0; px <= waveW; px++) {
        const t = (px / waveW) * 4 / freq + time;
        const i = I0 * Math.sin(omega * t - phi);
        const x = waveX + px;
        const y = midY - i * ampScale;
        if (px === 0) ctx.moveTo(x, y);
        else ctx.lineTo(x, y);
      }
      ctx.strokeStyle = '#00ffaa';
      ctx.lineWidth = 2;
      ctx.shadowColor = '#00ffaa';
      ctx.shadowBlur = 6;
      ctx.stroke();
      ctx.shadowBlur = 0;

      // Legend
      ctx.font = '11px "JetBrains Mono", monospace';
      ctx.textAlign = 'left';
      ctx.textBaseline = 'top';

      // Voltage legend
      ctx.fillStyle = '#00d4ff';
      ctx.fillRect(waveX + 10, waveY + 8, 14, 3);
      ctx.fillText('V(t) = V\u2080 sin(\u03C9t)', waveX + 30, waveY + 4);

      // Current legend
      ctx.fillStyle = '#00ffaa';
      ctx.fillRect(waveX + 10, waveY + 24, 14, 3);
      ctx.fillText(`I(t) = I\u2080 sin(\u03C9t \u2212 \u03C6)`, waveX + 30, waveY + 20);
    }

    function drawPhasorDiagram() {
      const freq = parseFloat(freqSlider.value);
      const V0 = parseInt(ampSlider.value);
      const phi = parseInt(phaseSlider.value) * Math.PI / 180;
      const omega = 2 * Math.PI * freq;
      const I0 = V0 * 0.7;

      // Phasor background circle
      ctx.fillStyle = 'rgba(10,10,30,0.6)';
      ctx.beginPath();
      ctx.arc(phasorCX, phasorCY, phasorR + 20, 0, Math.PI * 2);
      ctx.fill();
      ctx.strokeStyle = 'rgba(0,212,255,0.1)';
      ctx.lineWidth = 1;
      ctx.stroke();

      // Reference circle
      ctx.beginPath();
      ctx.arc(phasorCX, phasorCY, phasorR, 0, Math.PI * 2);
      ctx.strokeStyle = 'rgba(255,255,255,0.08)';
      ctx.stroke();

      // Inner circle for current
      const Iscale = phasorR * I0 / 100;
      ctx.beginPath();
      ctx.arc(phasorCX, phasorCY, Iscale, 0, Math.PI * 2);
      ctx.strokeStyle = 'rgba(255,255,255,0.05)';
      ctx.stroke();

      // Cross hairs
      ctx.beginPath();
      ctx.moveTo(phasorCX - phasorR - 10, phasorCY);
      ctx.lineTo(phasorCX + phasorR + 10, phasorCY);
      ctx.moveTo(phasorCX, phasorCY - phasorR - 10);
      ctx.lineTo(phasorCX, phasorCY + phasorR + 10);
      ctx.strokeStyle = 'rgba(255,255,255,0.08)';
      ctx.stroke();

      // Current angle (omega * time)
      const angle = omega * time;
      const Vscale = phasorR * V0 / 100;

      // Voltage phasor
      const vx = phasorCX + Vscale * Math.cos(-angle);
      const vy = phasorCY + Vscale * Math.sin(-angle);
      ctx.beginPath();
      ctx.moveTo(phasorCX, phasorCY);
      ctx.lineTo(vx, vy);
      ctx.strokeStyle = '#00d4ff';
      ctx.lineWidth = 3;
      ctx.shadowColor = '#00d4ff';
      ctx.shadowBlur = 8;
      ctx.stroke();
      ctx.shadowBlur = 0;

      // Voltage phasor arrowhead
      const vAngle = Math.atan2(vy - phasorCY, vx - phasorCX);
      ctx.save();
      ctx.translate(vx, vy);
      ctx.rotate(vAngle);
      ctx.beginPath();
      ctx.moveTo(8, 0);
      ctx.lineTo(-5, -4);
      ctx.lineTo(-5, 4);
      ctx.closePath();
      ctx.fillStyle = '#00d4ff';
      ctx.fill();
      ctx.restore();

      // Phasor endpoint glow
      ctx.beginPath();
      ctx.arc(vx, vy, 4, 0, Math.PI * 2);
      ctx.fillStyle = '#00d4ff';
      ctx.shadowColor = '#00d4ff';
      ctx.shadowBlur = 10;
      ctx.fill();
      ctx.shadowBlur = 0;

      // Current phasor (with phase lag)
      const ix = phasorCX + Iscale * Math.cos(-(angle - phi));
      const iy = phasorCY + Iscale * Math.sin(-(angle - phi));
      ctx.beginPath();
      ctx.moveTo(phasorCX, phasorCY);
      ctx.lineTo(ix, iy);
      ctx.strokeStyle = '#00ffaa';
      ctx.lineWidth = 3;
      ctx.shadowColor = '#00ffaa';
      ctx.shadowBlur = 8;
      ctx.stroke();
      ctx.shadowBlur = 0;

      // Current phasor arrowhead
      const iAngle = Math.atan2(iy - phasorCY, ix - phasorCX);
      ctx.save();
      ctx.translate(ix, iy);
      ctx.rotate(iAngle);
      ctx.beginPath();
      ctx.moveTo(8, 0);
      ctx.lineTo(-5, -4);
      ctx.lineTo(-5, 4);
      ctx.closePath();
      ctx.fillStyle = '#00ffaa';
      ctx.fill();
      ctx.restore();

      ctx.beginPath();
      ctx.arc(ix, iy, 4, 0, Math.PI * 2);
      ctx.fillStyle = '#00ffaa';
      ctx.shadowColor = '#00ffaa';
      ctx.shadowBlur = 10;
      ctx.fill();
      ctx.shadowBlur = 0;

      // Draw phase angle arc
      if (Math.abs(phi) > 0.01) {
        const arcR = 25;
        const startAngle = -angle;
        const endAngle = -(angle - phi);
        ctx.beginPath();
        ctx.arc(phasorCX, phasorCY, arcR, Math.min(startAngle, endAngle), Math.max(startAngle, endAngle));
        ctx.strokeStyle = '#ff2d75';
        ctx.lineWidth = 1.5;
        ctx.stroke();

        // Phase label
        const midAngle = -(angle - phi / 2);
        ctx.font = '10px "JetBrains Mono", monospace';
        ctx.fillStyle = '#ff2d75';
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        ctx.fillText('\u03C6', phasorCX + 35 * Math.cos(midAngle), phasorCY + 35 * Math.sin(midAngle));
      }

      // Labels
      ctx.font = '10px "JetBrains Mono", monospace';
      ctx.fillStyle = '#00d4ff';
      ctx.textAlign = 'center';
      ctx.fillText('V', vx + 12 * Math.cos(vAngle), vy + 12 * Math.sin(vAngle));
      ctx.fillStyle = '#00ffaa';
      ctx.fillText('I', ix + 12 * Math.cos(iAngle), iy + 12 * Math.sin(iAngle));

      // Phasor title
      ctx.font = 'bold 11px "JetBrains Mono", monospace';
      ctx.fillStyle = '#7c3aed';
      ctx.textAlign = 'center';
      ctx.fillText('PHASOR DIAGRAM', phasorCX, phasorCY - phasorR - 30);
    }

    function drawReadings() {
      const freq = parseFloat(freqSlider.value);
      const V0 = parseInt(ampSlider.value);
      const phi = parseInt(phaseSlider.value);
      const I0 = V0 * 0.7;
      const Vrms = (V0 / Math.sqrt(2)).toFixed(1);
      const Irms = (I0 / Math.sqrt(2)).toFixed(1);
      const omega = (2 * Math.PI * freq).toFixed(2);

      // Readings panel
      const rx = 620, ry = 320, rw = 220, rh = 120;
      ctx.fillStyle = 'rgba(10,10,30,0.9)';
      ctx.fillRect(rx, ry, rw, rh);
      ctx.strokeStyle = 'rgba(0,212,255,0.2)';
      ctx.lineWidth = 1;
      ctx.strokeRect(rx, ry, rw, rh);

      ctx.font = 'bold 11px "JetBrains Mono", monospace';
      ctx.textAlign = 'left';
      ctx.textBaseline = 'top';
      ctx.fillStyle = '#7c3aed';
      ctx.fillText('AC READINGS', rx + 10, ry + 8);

      ctx.font = '11px "JetBrains Mono", monospace';
      ctx.fillStyle = '#00d4ff';
      ctx.fillText(`V\u2080 = ${V0} V`, rx + 10, ry + 28);
      ctx.fillText(`V_rms = ${Vrms} V`, rx + 10, ry + 44);

      ctx.fillStyle = '#00ffaa';
      ctx.fillText(`I\u2080 = ${I0.toFixed(1)} A`, rx + 10, ry + 62);
      ctx.fillText(`I_rms = ${Irms} A`, rx + 10, ry + 78);

      ctx.fillStyle = '#ff2d75';
      ctx.fillText(`\u03C6 = ${phi}\u00B0`, rx + 120, ry + 28);

      ctx.fillStyle = '#ffaa00';
      ctx.fillText(`f = ${freq} Hz`, rx + 120, ry + 44);
      ctx.fillText(`\u03C9 = ${omega} rad/s`, rx + 120, ry + 62);

      // Phase description
      ctx.fillStyle = 'rgba(255,255,255,0.5)';
      ctx.font = '10px "JetBrains Mono", monospace';
      let phaseDesc = 'In phase';
      if (phi > 0) phaseDesc = 'I lags V (inductive)';
      else if (phi < 0) phaseDesc = 'I leads V (capacitive)';
      ctx.fillText(phaseDesc, rx + 10, ry + 100);
    }

    function animate() {
      const freq = parseFloat(freqSlider.value);
      time += 0.016;

      drawBackground();
      drawWaveformAxes();
      drawWaveforms();
      drawPhasorDiagram();
      drawReadings();

      requestAnimationFrame(animate);
    }

    animate();
  </script>
  <script src="../js/main.js"></script>
</body>
</html>
