<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Beats Simulation | Physics for Noobs</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;500;600;700&family=Delius&family=Nova+Square&family=Cabin+Sketch:wght@400;700&family=Orbitron:wght@400;500;600;700;800;900&family=Inter:wght@300;400;500;600;700&family=Andika:wght@400;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../css/style.css">
  <link rel="manifest" href="../manifest.json">
  <meta name="theme-color" content="#050510">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="apple-touch-icon" href="../images/icon-192.svg">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üî¨</text></svg>">
  <script src="../js/theme.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>
  <script defer src="../js/firebase-config.js"></script>
  <script defer src="../js/auth.js"></script>
  <script defer src="../js/sim-tracker.js"></script>
  <link rel="stylesheet" href="../css/achievements.css">
  <script defer src="../js/achievements-config.js"></script>
  <script defer src="../js/achievements.js"></script>
</head>
<body data-auth-redirect="../simulations.html">
  <!-- Splash Screen -->
  <div class="splash-screen" id="splash"><div class="splash-rocket"><div class="sp-nose"></div><div class="sp-body"></div><div class="sp-window"></div><div class="sp-fin-l"></div><div class="sp-fin-r"></div><div class="sp-flame"></div><div class="sp-glow"></div></div><div class="splash-logo">Physics <span class="brand-accent">for Noobs</span></div><div class="splash-tagline">Learn. Play. Master.</div></div>
<div class="bg-grid"></div>
  <nav class="navbar scrolled"><div class="nav-container"><a href="../index.html" class="nav-logo" id="nav-logo"><div class="logo-icon"><div class="logo-rocket">
  <div class="rocket-nose"></div>
  <div class="rocket-body"></div>
  <div class="rocket-window"></div>
  <div class="rocket-mark">4N</div>
            <div class="rocket-fin-l"></div>
  <div class="rocket-fin-r"></div>
  <div class="rocket-flame"></div>
  <div class="rocket-star"></div>
            <div class="rocket-star"></div>
            <div class="rocket-star"></div>
            <div class="rocket-glow"></div>
<div class="rocket-exhaust"></div>
            <div class="rocket-exhaust"></div>
            <div class="rocket-exhaust"></div>
          </div></div><div class="logo-text"><span class="brand-name">Physics <span class="brand-accent">for Noobs</span></span><span class="brand-tag">LEARN. PLAY. MASTER.</span></div></a><div class="nav-links">
        <div class="nav-item">
          <a href="../index.html" class="nav-link">Home</a>
        </div>
        <div class="nav-item">
          <a href="../about.html" class="nav-link">About Me</a>
        </div>
        <div class="nav-item"><a href="../chapters.html" class="nav-link">Chapters</a></div>        <div class="nav-item">
          <a href="../simulations.html" class="nav-link active">Simulations</a>
        </div>
        <div class="nav-item">
          <a href="../tests.html" class="nav-link">Tests</a>
        </div>
        <div class="nav-item">
          <a href="../flashcards.html" class="nav-link">Flashcards</a>
        </div>
  <script>
    (function(){
      var s=document.getElementById('splash');
      if(sessionStorage.getItem('ae-splash')){s.style.display='none';}
      else{
        sessionStorage.setItem('ae-splash','1');setTimeout(function(){s.classList.add('fade-out');},2200);setTimeout(function(){s.style.display='none';},2700);
      }
    })();
  </script>

  <div class="sim-page-container">
    <h1 style="font-family: var(--font-display); font-size: 1.8rem; margin: 16px 0 8px;">üéµ Beats Simulation</h1>
    <p style="color: var(--text-secondary); margin-bottom: 24px;">Grade XI &bull; Waves</p>

    <div class="sim-canvas-wrapper">
      <canvas id="simCanvas" width="850" height="450"></canvas>
      <div class="sim-controls">
        <div class="control-group">
          <label>Frequency 1: <span id="f1Val">5.0</span> Hz</label>
          <input type="range" id="f1Slider" min="1" max="20" value="5" step="0.1">
        </div>

        <div class="control-group">
          <label>Frequency 2: <span id="f2Val">7.0</span> Hz</label>
          <input type="range" id="f2Slider" min="1" max="20" value="7" step="0.1">
        </div>

        <div class="control-group">
          <label>Amplitude: <span id="ampVal">30</span> px</label>
          <input type="range" id="ampSlider" min="10" max="50" value="30" step="5">
        </div>

        <div class="stats-panel">
          <div class="stat-item">f‚ÇÅ: <span id="statF1">5.0</span> Hz</div>
          <div class="stat-item">f‚ÇÇ: <span id="statF2">7.0</span> Hz</div>
          <div class="stat-item">f_beat: <span id="statFbeat">2.0</span> Hz</div>
          <div class="stat-item">T_beat: <span id="statTbeat">0.50</span> s</div>
        </div>
      </div>
    </div>

    <div class="sim-info">
      <h2>About This Simulation</h2>
      <p>When two waves of slightly different frequencies interfere, they create a phenomenon called beats. The amplitude of the resultant wave periodically increases and decreases, producing a pulsing sound. The beat frequency equals the absolute difference between the two frequencies.</p>
      <div class="formula-box" style="margin-top: 16px;">y = y‚ÇÅ + y‚ÇÇ = 2A cos(2œÄ¬∑f_beat¬∑t/2) sin(2œÄ¬∑f_avg¬∑t) | f_beat = |f‚ÇÅ - f‚ÇÇ| | f_avg = (f‚ÇÅ + f‚ÇÇ)/2</div>
    </div>
  </div>

  <script>
    const canvas = document.getElementById('simCanvas');
    const ctx = canvas.getContext('2d');

    let f1 = 5.0;
    let f2 = 7.0;
    let amplitude = 30;
    let time = 0;

    const f1Slider = document.getElementById('f1Slider');
    const f2Slider = document.getElementById('f2Slider');
    const ampSlider = document.getElementById('ampSlider');

    f1Slider.oninput = function() {
      f1 = parseFloat(this.value);
      document.getElementById('f1Val').textContent = f1.toFixed(1);
      updateStats();
    };

    f2Slider.oninput = function() {
      f2 = parseFloat(this.value);
      document.getElementById('f2Val').textContent = f2.toFixed(1);
      updateStats();
    };

    ampSlider.oninput = function() {
      amplitude = parseFloat(this.value);
      document.getElementById('ampVal').textContent = amplitude;
    };

    function updateStats() {
      const fBeat = Math.abs(f1 - f2);
      const tBeat = fBeat > 0 ? 1 / fBeat : 0;

      document.getElementById('statF1').textContent = f1.toFixed(1);
      document.getElementById('statF2').textContent = f2.toFixed(1);
      document.getElementById('statFbeat').textContent = fBeat.toFixed(1);
      document.getElementById('statTbeat').textContent = tBeat.toFixed(2);
    }

    function drawWavePanel(yStart, yEnd, waveFunc, color, label) {
      const yMid = (yStart + yEnd) / 2;
      const panelHeight = yEnd - yStart;

      // Panel background
      ctx.fillStyle = 'rgba(10,10,30,0.4)';
      ctx.fillRect(50, yStart, 750, panelHeight);

      // Divider line
      ctx.strokeStyle = 'rgba(0,212,255,0.15)';
      ctx.lineWidth = 1;
      ctx.beginPath();
      ctx.moveTo(50, yEnd);
      ctx.lineTo(800, yEnd);
      ctx.stroke();

      // Axis line
      ctx.strokeStyle = 'rgba(255,255,255,0.2)';
      ctx.lineWidth = 1;
      ctx.beginPath();
      ctx.moveTo(50, yMid);
      ctx.lineTo(800, yMid);
      ctx.stroke();

      // Time arrow
      ctx.strokeStyle = 'rgba(255,255,255,0.3)';
      ctx.lineWidth = 1.5;
      ctx.beginPath();
      ctx.moveTo(780, yMid);
      ctx.lineTo(790, yMid);
      ctx.stroke();
      ctx.beginPath();
      ctx.moveTo(790, yMid);
      ctx.lineTo(785, yMid - 4);
      ctx.moveTo(790, yMid);
      ctx.lineTo(785, yMid + 4);
      ctx.stroke();

      ctx.fillStyle = 'rgba(255,255,255,0.4)';
      ctx.font = '10px JetBrains Mono';
      ctx.fillText('t', 795, yMid + 4);

      // Label
      ctx.fillStyle = color;
      ctx.font = '12px JetBrains Mono';
      ctx.fillText(label, 60, yStart + 20);

      // Draw wave
      ctx.strokeStyle = color;
      ctx.lineWidth = 2;
      ctx.beginPath();
      for (let x = 50; x <= 800; x++) {
        const t = (x - 50) / 750 * 2 - time;
        const y = yMid + waveFunc(t);
        if (x === 50) {
          ctx.moveTo(x, y);
        } else {
          ctx.lineTo(x, y);
        }
      }
      ctx.stroke();
    }

    function drawEnvelope(yStart, yEnd) {
      const yMid = (yStart + yEnd) / 2;
      const fBeat = Math.abs(f1 - f2);

      if (fBeat < 0.1) return;

      ctx.strokeStyle = 'rgba(0,255,170,0.6)';
      ctx.lineWidth = 1.5;
      ctx.setLineDash([5, 5]);

      // Upper envelope
      ctx.beginPath();
      for (let x = 50; x <= 800; x++) {
        const t = (x - 50) / 750 * 2 - time;
        const envelope = Math.abs(2 * amplitude * Math.cos(Math.PI * fBeat * t));
        const y = yMid - envelope;
        if (x === 50) {
          ctx.moveTo(x, y);
        } else {
          ctx.lineTo(x, y);
        }
      }
      ctx.stroke();

      // Lower envelope
      ctx.beginPath();
      for (let x = 50; x <= 800; x++) {
        const t = (x - 50) / 750 * 2 - time;
        const envelope = Math.abs(2 * amplitude * Math.cos(Math.PI * fBeat * t));
        const y = yMid + envelope;
        if (x === 50) {
          ctx.moveTo(x, y);
        } else {
          ctx.lineTo(x, y);
        }
      }
      ctx.stroke();

      ctx.setLineDash([]);
    }

    function draw() {
      // Background
      ctx.fillStyle = '#080818';
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      // Grid
      ctx.strokeStyle = 'rgba(0,212,255,0.04)';
      ctx.lineWidth = 1;
      for (let x = 50; x <= 800; x += 50) {
        ctx.beginPath();
        ctx.moveTo(x, 0);
        ctx.lineTo(x, canvas.height);
        ctx.stroke();
      }

      const panelHeight = 140;

      // Wave 1
      drawWavePanel(10, 10 + panelHeight, (t) => {
        return amplitude * Math.sin(2 * Math.PI * f1 * t);
      }, '#00d4ff', 'Wave 1 (f‚ÇÅ)');

      // Wave 2
      drawWavePanel(10 + panelHeight, 10 + 2 * panelHeight, (t) => {
        return amplitude * Math.sin(2 * Math.PI * f2 * t);
      }, '#7c3aed', 'Wave 2 (f‚ÇÇ)');

      // Superposition
      drawWavePanel(10 + 2 * panelHeight, 10 + 3 * panelHeight, (t) => {
        const y1 = amplitude * Math.sin(2 * Math.PI * f1 * t);
        const y2 = amplitude * Math.sin(2 * Math.PI * f2 * t);
        return y1 + y2;
      }, '#00ffaa', 'Superposition (Beat Pattern)');

      // Draw envelope on superposition
      drawEnvelope(10 + 2 * panelHeight, 10 + 3 * panelHeight);

      // No beats message
      const fBeat = Math.abs(f1 - f2);
      if (fBeat < 0.1) {
        ctx.fillStyle = 'rgba(245,158,11,0.9)';
        ctx.font = '14px JetBrains Mono';
        ctx.fillText('No beats - same frequency', 320, 10 + 2.5 * panelHeight);
      }

      // Beat frequency display
      if (fBeat >= 0.1) {
        ctx.fillStyle = 'rgba(0,255,170,0.9)';
        ctx.font = '12px JetBrains Mono';
        ctx.fillText('f_beat = |f‚ÇÅ - f‚ÇÇ| = ' + fBeat.toFixed(1) + ' Hz', 300, 440);
      }
    }

    function animate() {
      time += 0.005;
      draw();
      requestAnimationFrame(animate);
    }

    updateStats();
    animate();
  </script>
  <script src="../js/main.js"></script>
  <script src="../js/auth-gate.js"></script>
<script>if("serviceWorker" in navigator){navigator.serviceWorker.register("/sw.js");}</script>
</body>
</html>
