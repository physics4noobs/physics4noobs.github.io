<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Boat Crossing a River | AXOMIYA ENGINEER</title>
  <link rel="stylesheet" href="../css/style.css">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>⚛</text></svg>">
</head>
<body>
  <div class="bg-grid"></div>
  <nav class="navbar scrolled">
    <div class="nav-container">
      <a href="../index.html" class="nav-logo">
        <div class="logo-icon"><div class="logo-atom"><div class="nucleus"></div><div class="orbit"></div><div class="orbit"></div><div class="orbit"></div></div></div>
        <div class="logo-text"><span class="brand-name">Axomiya Engineer</span><span class="brand-tag">IIT Guwahati &bull; Physics</span></div>
      </a>
      <div class="nav-links">
        <div class="nav-item"><a href="../index.html" class="nav-link">Home</a></div>
        <div class="nav-item"><a href="../simulations.html" class="nav-link active">Simulations</a></div>
        <div class="nav-item"><a href="../chapters.html" class="nav-link">Chapters</a></div>
        <a href="../index.html#contact" class="nav-cta">Contact Me</a>
      </div>
      <button class="nav-toggle" aria-label="Menu"><span></span><span></span><span></span></button>
    </div>
  </nav>

  <div class="sim-page-container">
    <div class="breadcrumb" style="justify-content: flex-start; margin-top: 20px;">
      <a href="../index.html">Home</a><span>/</span><a href="../simulations.html">Simulations</a><span>/</span><span>Kinematics</span>
    </div>
    <h1 style="font-family: var(--font-display); font-size: 1.8rem; margin: 16px 0 8px; letter-spacing: 1px;">&#9973; Boat Crossing a River</h1>
    <p style="color: var(--text-secondary); margin-bottom: 24px;">Grade XI &bull; Kinematics</p>

    <div class="sim-canvas-wrapper">
      <canvas id="simCanvas" width="850" height="450"></canvas>
      <div class="sim-controls">
        <label>Boat Speed: <input type="range" id="boatSpeed" min="1" max="10" value="5" step="0.5"> <span id="boatVal">5</span> m/s</label>
        <label>River Speed: <input type="range" id="riverSpeed" min="1" max="10" value="3" step="0.5"> <span id="riverVal">3</span> m/s</label>
        <label>Boat Angle: <input type="range" id="boatAngle" min="-60" max="60" value="0"> <span id="angleVal">0</span>&deg;</label>
        <button onclick="launch()">&#9654; Launch</button>
        <button onclick="setMinTime()">Min Time</button>
        <button onclick="setMinDrift()">Min Drift</button>
        <button onclick="resetSim()">&#8635; Reset</button>
      </div>
    </div>

    <div class="sim-info">
      <h2>About This Simulation</h2>
      <p>A boat crosses a river with a current. Explore how the boat angle affects crossing time and drift. Find the conditions for minimum time and minimum drift. The boat's velocity relative to water is shown in green, the river's velocity in cyan, and the resultant velocity in purple.</p>
      <div class="formula-box" style="margin-top: 16px;">
        t = d/(v<sub>b</sub> cos&theta;) &nbsp;&nbsp;|&nbsp;&nbsp; drift = v<sub>r</sub> &times; t &nbsp;&nbsp;|&nbsp;&nbsp; Min drift: sin&theta; = v<sub>r</sub>/v<sub>b</sub>
      </div>
    </div>
  </div>

  <script>
    const canvas = document.getElementById('simCanvas');
    const ctx = canvas.getContext('2d');

    const boatSpeedSlider = document.getElementById('boatSpeed');
    const riverSpeedSlider = document.getElementById('riverSpeed');
    const boatAngleSlider = document.getElementById('boatAngle');

    boatSpeedSlider.oninput = () => { document.getElementById('boatVal').textContent = boatSpeedSlider.value; draw(); };
    riverSpeedSlider.oninput = () => { document.getElementById('riverVal').textContent = riverSpeedSlider.value; draw(); };
    boatAngleSlider.oninput = () => { document.getElementById('angleVal').textContent = boatAngleSlider.value; draw(); };

    const riverTop = 50;
    const riverHeight = 300;
    const riverBottom = riverTop + riverHeight;
    const startX = 100;
    const startY = riverBottom;
    const scale = 15;

    let animId = null;
    let boat = null;
    let trail = [];
    let particles = [];

    // Initialize river particles
    for (let i = 0; i < 50; i++) {
      particles.push({
        x: Math.random() * canvas.width,
        y: riverTop + Math.random() * riverHeight
      });
    }

    function drawBackground() {
      ctx.fillStyle = '#080818';
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      // Grid
      ctx.strokeStyle = 'rgba(0,212,255,0.04)';
      ctx.lineWidth = 1;
      for (let x = 0; x < canvas.width; x += 40) {
        ctx.beginPath(); ctx.moveTo(x, 0); ctx.lineTo(x, canvas.height); ctx.stroke();
      }
      for (let y = 0; y < canvas.height; y += 40) {
        ctx.beginPath(); ctx.moveTo(0, y); ctx.lineTo(canvas.width, y); ctx.stroke();
      }

      // River
      ctx.fillStyle = 'rgba(0,150,255,0.15)';
      ctx.fillRect(0, riverTop, canvas.width, riverHeight);

      // River banks
      ctx.strokeStyle = 'rgba(0,255,170,0.5)';
      ctx.lineWidth = 3;
      ctx.beginPath();
      ctx.moveTo(0, riverTop);
      ctx.lineTo(canvas.width, riverTop);
      ctx.stroke();
      ctx.beginPath();
      ctx.moveTo(0, riverBottom);
      ctx.lineTo(canvas.width, riverBottom);
      ctx.stroke();

      // River particles (flowing)
      const riverSpeed = parseFloat(riverSpeedSlider.value);
      ctx.fillStyle = 'rgba(0,212,255,0.4)';
      for (let p of particles) {
        p.x += riverSpeed * 0.5;
        if (p.x > canvas.width) p.x = 0;
        ctx.beginPath();
        ctx.arc(p.x, p.y, 2, 0, Math.PI * 2);
        ctx.fill();
      }
    }

    function drawArrow(x1, y1, x2, y2, color, width = 2) {
      const headlen = 10;
      const angle = Math.atan2(y2 - y1, x2 - x1);

      ctx.strokeStyle = color;
      ctx.fillStyle = color;
      ctx.lineWidth = width;
      ctx.beginPath();
      ctx.moveTo(x1, y1);
      ctx.lineTo(x2, y2);
      ctx.stroke();

      ctx.beginPath();
      ctx.moveTo(x2, y2);
      ctx.lineTo(x2 - headlen * Math.cos(angle - Math.PI / 6), y2 - headlen * Math.sin(angle - Math.PI / 6));
      ctx.lineTo(x2 - headlen * Math.cos(angle + Math.PI / 6), y2 - headlen * Math.sin(angle + Math.PI / 6));
      ctx.closePath();
      ctx.fill();
    }

    function drawBoat(x, y, angle) {
      ctx.save();
      ctx.translate(x, y);
      ctx.rotate(angle);

      ctx.fillStyle = '#ffffff';
      ctx.beginPath();
      ctx.moveTo(10, 0);
      ctx.lineTo(-5, -6);
      ctx.lineTo(-5, 6);
      ctx.closePath();
      ctx.fill();

      ctx.restore();
    }

    function draw() {
      const boatSpeed = parseFloat(boatSpeedSlider.value);
      const riverSpeed = parseFloat(riverSpeedSlider.value);
      const angle = parseFloat(boatAngleSlider.value);
      const rad = angle * Math.PI / 180;

      // Calculate velocities
      const vbx = boatSpeed * Math.sin(rad);
      const vby = -boatSpeed * Math.cos(rad);
      const vrx = riverSpeed;
      const vry = 0;

      const vx = vbx + vrx;
      const vy = vby + vry;

      const crossingTime = riverHeight / scale / (boatSpeed * Math.cos(rad));
      const drift = riverSpeed * crossingTime;

      drawBackground();

      // Draw velocity vectors from start position
      const vecScale = 3;
      drawArrow(startX, startY, startX + vbx * scale * vecScale, startY + vby * scale * vecScale, '#00ffaa', 2);
      drawArrow(startX, startY, startX + vrx * scale * vecScale, startY + vry * scale * vecScale, '#00d4ff', 2);
      drawArrow(startX, startY, startX + vx * scale * vecScale, startY + vy * scale * vecScale, '#7c3aed', 3);

      // Labels for vectors
      ctx.font = '12px "JetBrains Mono", monospace';
      ctx.fillStyle = '#00ffaa';
      ctx.fillText('v_boat', startX + vbx * scale * vecScale + 5, startY + vby * scale * vecScale - 5);
      ctx.fillStyle = '#00d4ff';
      ctx.fillText('v_river', startX + vrx * scale * vecScale + 5, startY + 15);
      ctx.fillStyle = '#7c3aed';
      ctx.fillText('v_resultant', startX + vx * scale * vecScale + 5, startY + vy * scale * vecScale + 15);

      // Draw stats
      ctx.fillStyle = 'rgba(10,10,30,0.85)';
      ctx.fillRect(canvas.width - 260, 10, 250, 150);
      ctx.strokeStyle = 'rgba(0,212,255,0.2)';
      ctx.strokeRect(canvas.width - 260, 10, 250, 150);

      ctx.font = '12px "JetBrains Mono", monospace';
      ctx.fillStyle = '#ffffff';
      ctx.fillText(`Boat Speed: ${boatSpeed.toFixed(1)} m/s`, canvas.width - 250, 30);
      ctx.fillText(`River Speed: ${riverSpeed.toFixed(1)} m/s`, canvas.width - 250, 50);
      ctx.fillText(`Angle: ${angle}° from ⊥`, canvas.width - 250, 70);
      ctx.fillText(`Time to cross: ${crossingTime.toFixed(2)} s`, canvas.width - 250, 90);
      ctx.fillText(`Drift: ${drift.toFixed(1)} m`, canvas.width - 250, 110);

      const resultantSpeed = Math.sqrt(vx * vx + vy * vy);
      ctx.fillText(`Resultant: ${resultantSpeed.toFixed(2)} m/s`, canvas.width - 250, 130);

      if (boatSpeed > riverSpeed) {
        const minDriftAngle = -Math.asin(riverSpeed / boatSpeed) * 180 / Math.PI;
        ctx.fillStyle = '#00ffaa';
        ctx.fillText(`Min drift angle: ${minDriftAngle.toFixed(1)}°`, canvas.width - 250, 150);
      }
    }

    function launch() {
      if (animId) cancelAnimationFrame(animId);
      trail = [];

      const boatSpeed = parseFloat(boatSpeedSlider.value);
      const riverSpeed = parseFloat(riverSpeedSlider.value);
      const angle = parseFloat(boatAngleSlider.value);
      const rad = angle * Math.PI / 180;

      const vbx = boatSpeed * Math.sin(rad);
      const vby = -boatSpeed * Math.cos(rad);
      const vrx = riverSpeed;

      const vx = vbx + vrx;
      const vy = vby;

      boat = {
        x: startX,
        y: startY,
        vx: vx * scale,
        vy: vy * scale,
        angle: Math.atan2(vx, -vy)
      };

      animate();
    }

    function animate() {
      if (!boat) return;

      boat.x += boat.vx * 0.5;
      boat.y += boat.vy * 0.5;
      trail.push({ x: boat.x, y: boat.y });

      drawBackground();

      // Draw trail
      ctx.strokeStyle = 'rgba(255,255,255,0.3)';
      ctx.lineWidth = 2;
      ctx.setLineDash([5, 5]);
      ctx.beginPath();
      if (trail.length > 0) {
        ctx.moveTo(trail[0].x, trail[0].y);
        for (let i = 1; i < trail.length; i++) {
          ctx.lineTo(trail[i].x, trail[i].y);
        }
      }
      ctx.stroke();
      ctx.setLineDash([]);

      // Draw drift lines
      ctx.setLineDash([3, 3]);
      ctx.strokeStyle = 'rgba(255,45,117,0.4)';
      ctx.beginPath();
      ctx.moveTo(startX, riverTop);
      ctx.lineTo(startX, riverBottom);
      ctx.stroke();

      if (boat.y <= riverTop) {
        ctx.beginPath();
        ctx.moveTo(boat.x, riverTop);
        ctx.lineTo(boat.x, riverBottom);
        ctx.stroke();

        ctx.strokeStyle = 'rgba(255,45,117,0.6)';
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(startX, riverTop - 20);
        ctx.lineTo(boat.x, riverTop - 20);
        ctx.stroke();

        ctx.fillStyle = '#ff2d75';
        ctx.font = '12px "JetBrains Mono", monospace';
        ctx.fillText('drift', (startX + boat.x) / 2 - 15, riverTop - 25);
      }
      ctx.setLineDash([]);

      // Redraw velocity vectors
      const boatSpeed = parseFloat(boatSpeedSlider.value);
      const riverSpeed = parseFloat(riverSpeedSlider.value);
      const angle = parseFloat(boatAngleSlider.value);
      const rad = angle * Math.PI / 180;
      const vbx = boatSpeed * Math.sin(rad);
      const vby = -boatSpeed * Math.cos(rad);
      const vrx = riverSpeed;
      const vx = vbx + vrx;
      const vy = vby;
      const vecScale = 3;

      drawArrow(startX, startY, startX + vbx * scale * vecScale, startY + vby * scale * vecScale, '#00ffaa', 2);
      drawArrow(startX, startY, startX + vrx * scale * vecScale, startY, '#00d4ff', 2);
      drawArrow(startX, startY, startX + vx * scale * vecScale, startY + vy * scale * vecScale, '#7c3aed', 3);

      // Draw boat
      drawBoat(boat.x, boat.y, boat.angle);

      // Draw stats
      const crossingTime = riverHeight / scale / (boatSpeed * Math.cos(rad));
      const drift = riverSpeed * crossingTime;
      const currentTime = (startY - boat.y) / scale / (boatSpeed * Math.cos(rad));

      ctx.fillStyle = 'rgba(10,10,30,0.85)';
      ctx.fillRect(canvas.width - 260, 10, 250, 170);
      ctx.strokeStyle = 'rgba(0,212,255,0.2)';
      ctx.strokeRect(canvas.width - 260, 10, 250, 170);

      ctx.font = '12px "JetBrains Mono", monospace';
      ctx.fillStyle = '#ffffff';
      ctx.fillText(`Boat Speed: ${boatSpeed.toFixed(1)} m/s`, canvas.width - 250, 30);
      ctx.fillText(`River Speed: ${riverSpeed.toFixed(1)} m/s`, canvas.width - 250, 50);
      ctx.fillText(`Angle: ${angle}° from ⊥`, canvas.width - 250, 70);
      ctx.fillText(`Time to cross: ${crossingTime.toFixed(2)} s`, canvas.width - 250, 90);
      ctx.fillText(`Drift: ${drift.toFixed(1)} m`, canvas.width - 250, 110);

      const resultantSpeed = Math.sqrt(vx * vx + vy * vy);
      ctx.fillText(`Resultant: ${resultantSpeed.toFixed(2)} m/s`, canvas.width - 250, 130);
      ctx.fillStyle = '#00ffaa';
      ctx.fillText(`Current time: ${currentTime.toFixed(2)} s`, canvas.width - 250, 150);

      if (boat.y > riverTop) {
        animId = requestAnimationFrame(animate);
      } else {
        boat.y = riverTop;
        drawBoat(boat.x, boat.y, boat.angle);
      }
    }

    function setMinTime() {
      boatAngleSlider.value = 0;
      document.getElementById('angleVal').textContent = 0;
      draw();
    }

    function setMinDrift() {
      const boatSpeed = parseFloat(boatSpeedSlider.value);
      const riverSpeed = parseFloat(riverSpeedSlider.value);

      if (boatSpeed > riverSpeed) {
        const minAngle = -Math.asin(riverSpeed / boatSpeed) * 180 / Math.PI;
        boatAngleSlider.value = Math.round(minAngle);
        document.getElementById('angleVal').textContent = Math.round(minAngle);
        draw();
      } else {
        alert('Boat speed must be greater than river speed for minimum drift!');
      }
    }

    function resetSim() {
      if (animId) cancelAnimationFrame(animId);
      boat = null;
      trail = [];
      draw();
    }

    draw();
  </script>
  <script src="../js/main.js"></script>
</body>
</html>
